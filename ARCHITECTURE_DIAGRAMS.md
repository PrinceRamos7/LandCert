# CPDO System - Visual Architecture Diagrams

## 1. System Context Diagram

```
                    ┌─────────────────────────────────────┐
                    │                                     │
                    │     CPDO Management System          │
                    │                                     │
                    │  - Request Management               │
                    │  - Payment Processing               │
                    │  - Certificate Issuance             │
                    │  - Analytics & Reporting            │
                    │                                     │
                    └──────────┬──────────────────────────┘
                               │
        ┌──────────────────────┼──────────────────────┐
        │                      │                      │
        ▼                      ▼                      ▼
┌───────────────┐    ┌───────────────┐    ┌───────────────┐
│               │    │               │    │               │
│  End Users    │    │  Admins       │    │  Email        │
│  (Citizens)   │    │  (CPDO Staff) │    │  Service      │
│               │    │               │    │  (SMTP)       │
│  - Submit     │    │  - Approve    │    │               │
│    Requests   │    │  - Verify     │    │  - Send       │
│  - Upload     │    │  - Issue      │    │    Notifs     │
│    Receipts   │    │    Certs      │    │               │
│  - Download   │    │  - Analytics  │    │               │
│    Certs      │    │               │    │               │
│               │    │               │    │               │
└───────────────┘    └───────────────┘    └───────────────┘
```

---

## 2. Container Diagram (C4 Model)


```
┌─────────────────────────────────────────────────────────────────────────┐
│                          Web Browser                                     │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │                    React SPA (Inertia.js)                         │  │
│  │  - User Interface Components                                     │  │
│  │  - State Management                                              │  │
│  │  - Client-side Routing                                           │  │
│  └────────────────────────┬─────────────────────────────────────────┘  │
└────────────────────────────┼────────────────────────────────────────────┘
                             │ HTTPS
                             │
┌────────────────────────────┼────────────────────────────────────────────┐
│                            ▼                                             │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │                    Web Server (Apache/Nginx)                      │  │
│  │  - SSL/TLS Termination                                           │  │
│  │  - Static Asset Serving                                          │  │
│  │  - Request Routing                                               │  │
│  └────────────────────────┬─────────────────────────────────────────┘  │
│                            │                                             │
│  ┌────────────────────────▼─────────────────────────────────────────┐  │
│  │                Laravel Application (PHP 8.2+)                     │  │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │  │
│  │  │ Controllers  │  │  Services    │  │  Models      │          │  │
│  │  └──────────────┘  └──────────────┘  └──────────────┘          │  │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │  │
│  │  │ Middleware   │  │  Observers   │  │  Jobs        │          │  │
│  │  └──────────────┘  └──────────────┘  └──────────────┘          │  │
│  └────────────────────────┬─────────────────────────────────────────┘  │
│                            │                                             │
│         ┌──────────────────┼──────────────────┐                         │
│         │                  │                  │                         │
│         ▼                  ▼                  ▼                         │
│  ┌─────────────┐    ┌─────────────┐   ┌─────────────┐                 │
│  │   MySQL     │    │   Redis     │   │ File System │                 │
│  │  Database   │    │   Cache     │   │  (Storage)  │                 │
│  └─────────────┘    └─────────────┘   └─────────────┘                 │
│                                                                          │
└──────────────────────────────────────────────────────────────────────────┘
                             │
                             │ SMTP
                             ▼
                    ┌─────────────────┐
                    │  Email Service  │
                    │  (Gmail, etc.)  │
                    └─────────────────┘
```

---

## 3. Component Diagram - Frontend


```
┌─────────────────────────────────────────────────────────────────────────┐
│                        React Application                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                         Pages Layer                             │    │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐      │    │
│  │  │  Login   │  │Register  │  │Dashboard │  │  Admin   │      │    │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘      │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                  │                                       │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                      Components Layer                           │    │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐│    │
│  │  │ Admin Components│  │ User Components │  │Shared Components││    │
│  │  │                 │  │                 │  │                 ││    │
│  │  │ • Request Mgmt  │  │ • Dashboard     │  │ • UI Kit        ││    │
│  │  │ • Payments      │  │ • Receipt       │  │ • Forms         ││    │
│  │  │ • Analytics     │  │ • Request Form  │  │ • Modals        ││    │
│  │  │ • AuditLog      │  │                 │  │ • Tables        ││    │
│  │  │ • Users         │  │                 │  │ • Charts        ││    │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘│    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                  │                                       │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                       Layouts Layer                             │    │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐        │    │
│  │  │   Guest      │  │Authenticated │  │    Admin     │        │    │
│  │  │   Layout     │  │   Layout     │  │   Layout     │        │    │
│  │  └──────────────┘  └──────────────┘  └──────────────┘        │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                  │                                       │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                    Utilities & Hooks                            │    │
│  │  • useToast  • useAuth  • formatters  • validators             │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 4. Component Diagram - Backend


```
┌─────────────────────────────────────────────────────────────────────────┐
│                      Laravel Application                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                         Routes                                  │    │
│  │  • web.php (Web Routes)                                        │    │
│  │  • api.php (API Routes - Optional)                             │    │
│  └────────────────────────┬───────────────────────────────────────┘    │
│                            │                                             │
│  ┌────────────────────────▼───────────────────────────────────────┐    │
│  │                      Middleware                                 │    │
│  │  • Authentication  • RBAC  • AuditLog  • CSRF  • Performance   │    │
│  └────────────────────────┬───────────────────────────────────────┘    │
│                            │                                             │
│  ┌────────────────────────▼───────────────────────────────────────┐    │
│  │                      Controllers                                │    │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐        │    │
│  │  │    Auth      │  │    Admin     │  │   Payment    │        │    │
│  │  │  Controller  │  │  Controller  │  │  Controller  │        │    │
│  │  └──────────────┘  └──────────────┘  └──────────────┘        │    │
│  └────────────────────────┬───────────────────────────────────────┘    │
│                            │                                             │
│  ┌────────────────────────▼───────────────────────────────────────┐    │
│  │                       Services                                  │    │
│  │  • AuditLogService  • ReminderService  • DashboardCacheService │    │
│  └────────────────────────┬───────────────────────────────────────┘    │
│                            │                                             │
│  ┌────────────────────────▼───────────────────────────────────────┐    │
│  │                        Models                                   │    │
│  │  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐ │    │
│  │  │ User │  │Request│  │Payment│  │ Cert │  │Audit │  │Notif │ │    │
│  │  └──────┘  └──────┘  └──────┘  └──────┘  └──────┘  └──────┘ │    │
│  └────────────────────────┬───────────────────────────────────────┘    │
│                            │                                             │
│  ┌────────────────────────▼───────────────────────────────────────┐    │
│  │                      Observers                                  │    │
│  │  • RequestObserver  • PaymentObserver  • ReportObserver        │    │
│  └────────────────────────┬───────────────────────────────────────┘    │
│                            │                                             │
│  ┌────────────────────────▼───────────────────────────────────────┐    │
│  │                    Database Layer                               │    │
│  │  • Eloquent ORM  • Query Builder  • Migrations  • Seeders      │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 5. Data Flow Diagram - Request Submission


```
     User                 Frontend              Backend              Database
      │                      │                     │                     │
      │  1. Fill Form        │                     │                     │
      ├─────────────────────>│                     │                     │
      │                      │                     │                     │
      │  2. Submit           │                     │                     │
      ├─────────────────────>│  3. POST Request    │                     │
      │                      ├────────────────────>│                     │
      │                      │                     │  4. Validate        │
      │                      │                     ├────────┐            │
      │                      │                     │<───────┘            │
      │                      │                     │                     │
      │                      │                     │  5. Save Request    │
      │                      │                     ├────────────────────>│
      │                      │                     │                     │
      │                      │                     │  6. Trigger Observer│
      │                      │                     ├────────┐            │
      │                      │                     │<───────┘            │
      │                      │                     │                     │
      │                      │                     │  7. Create AuditLog │
      │                      │                     ├────────────────────>│
      │                      │                     │                     │
      │                      │                     │  8. Queue Email     │
      │                      │                     ├────────┐            │
      │                      │                     │<───────┘            │
      │                      │                     │                     │
      │                      │  9. Success Response│                     │
      │                      │<────────────────────┤                     │
      │  10. Show Success    │                     │                     │
      │<─────────────────────┤                     │                     │
      │                      │                     │                     │
      │  11. Redirect        │                     │                     │
      │<─────────────────────┤                     │                     │
      │                      │                     │                     │
```

---

## 6. Sequence Diagram - Payment Verification


```
    Admin              Frontend           Backend          Database        Email
      │                    │                 │                 │             │
      │  1. View Payment   │                 │                 │             │
      ├───────────────────>│                 │                 │             │
      │                    │  2. GET Payment │                 │             │
      │                    ├────────────────>│  3. Query       │             │
      │                    │                 ├────────────────>│             │
      │                    │                 │<────────────────┤             │
      │                    │<────────────────┤                 │             │
      │                    │                 │                 │             │
      │  4. Click Verify   │                 │                 │             │
      ├───────────────────>│                 │                 │             │
      │                    │  5. POST Verify │                 │             │
      │                    ├────────────────>│                 │             │
      │                    │                 │  6. Update      │             │
      │                    │                 │    Payment      │             │
      │                    │                 ├────────────────>│             │
      │                    │                 │                 │             │
      │                    │                 │  7. Generate    │             │
      │                    │                 │    Certificate  │             │
      │                    │                 ├────────┐        │             │
      │                    │                 │<───────┘        │             │
      │                    │                 │                 │             │
      │                    │                 │  8. Save Cert   │             │
      │                    │                 ├────────────────>│             │
      │                    │                 │                 │             │
      │                    │                 │  9. Audit Log   │             │
      │                    │                 ├────────────────>│             │
      │                    │                 │                 │             │
      │                    │                 │  10. Send Email │             │
      │                    │                 ├─────────────────────────────>│
      │                    │                 │                 │             │
      │                    │  11. Success    │                 │             │
      │                    │<────────────────┤                 │             │
      │  12. Show Success  │                 │                 │             │
      │<───────────────────┤                 │                 │             │
      │                    │                 │                 │             │
```

---

## 7. Deployment Diagram


```
┌─────────────────────────────────────────────────────────────────────────┐
│                         Production Server                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                    Operating System                             │    │
│  │                  Ubuntu 22.04 LTS                               │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                    Web Server Layer                             │    │
│  │  ┌──────────────────────────────────────────────────────────┐  │    │
│  │  │              Nginx 1.18+ / Apache 2.4+                   │  │    │
│  │  │  • Port 80 (HTTP → HTTPS Redirect)                       │  │    │
│  │  │  • Port 443 (HTTPS)                                      │  │    │
│  │  │  • SSL Certificate (Let's Encrypt)                       │  │    │
│  │  └──────────────────────────────────────────────────────────┘  │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                  Application Layer                              │    │
│  │  ┌──────────────────────────────────────────────────────────┐  │    │
│  │  │                  PHP-FPM 8.2+                            │  │    │
│  │  │  • Laravel Application                                   │  │    │
│  │  │  • /var/www/cpdo                                         │  │    │
│  │  └──────────────────────────────────────────────────────────┘  │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                    Database Layer                               │    │
│  │  ┌──────────────────────────────────────────────────────────┐  │    │
│  │  │                  MySQL 8.0+                              │  │    │
│  │  │  • Port 3306                                             │  │    │
│  │  │  • Database: cpdo_db                                     │  │    │
│  │  └──────────────────────────────────────────────────────────┘  │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                     Cache Layer                                 │    │
│  │  ┌──────────────────────────────────────────────────────────┐  │    │
│  │  │                  Redis 7.x                               │  │    │
│  │  │  • Port 6379                                             │  │    │
│  │  │  • Session Storage                                       │  │    │
│  │  │  • Cache Storage                                         │  │    │
│  │  └──────────────────────────────────────────────────────────┘  │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                   File Storage                                  │    │
│  │  • /var/www/cpdo/storage/app/public                            │    │
│  │    ├── receipts/                                               │    │
│  │    ├── certificates/                                           │    │
│  │    └── avatars/                                                │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 8. Network Architecture


```
                          Internet
                             │
                             │
                    ┌────────▼────────┐
                    │   Firewall      │
                    │   (Port 80,443) │
                    └────────┬────────┘
                             │
                    ┌────────▼────────┐
                    │  Load Balancer  │
                    │   (Optional)    │
                    └────────┬────────┘
                             │
              ┌──────────────┼──────────────┐
              │              │              │
         ┌────▼────┐    ┌────▼────┐   ┌────▼────┐
         │  Web    │    │  Web    │   │  Web    │
         │ Server  │    │ Server  │   │ Server  │
         │   #1    │    │   #2    │   │   #3    │
         └────┬────┘    └────┬────┘   └────┬────┘
              │              │              │
              └──────────────┼──────────────┘
                             │
                    ┌────────▼────────┐
                    │  Internal       │
                    │  Network        │
                    └────────┬────────┘
                             │
              ┌──────────────┼──────────────┐
              │              │              │
         ┌────▼────┐    ┌────▼────┐   ┌────▼────┐
         │ MySQL   │    │  Redis  │   │  File   │
         │Database │    │  Cache  │   │ Storage │
         └─────────┘    └─────────┘   └─────────┘
```

---

## 9. Security Architecture Layers


```
┌─────────────────────────────────────────────────────────────────────────┐
│                      Security Layers (Defense in Depth)                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Layer 7: User Education & Awareness                                    │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │  • Security Training  • Password Policies  • Best Practices    │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                  │                                       │
│  Layer 6: Application Security                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │  • Input Validation  • CSRF Protection  • XSS Prevention       │    │
│  │  • SQL Injection Prevention  • Secure Sessions                 │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                  │                                       │
│  Layer 5: Authentication & Authorization                                │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │  • Laravel Breeze  • Password Hashing  • RBAC                  │    │
│  │  • Email Verification  • Session Management                    │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                  │                                       │
│  Layer 4: Data Security                                                 │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │  • Database Encryption  • File Upload Validation               │    │
│  │  • Secure File Storage  • Audit Logging                        │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                  │                                       │
│  Layer 3: Network Security                                              │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │  • HTTPS/SSL  • Firewall Rules  • DDoS Protection              │    │
│  │  • Rate Limiting  • IP Whitelisting                            │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                  │                                       │
│  Layer 2: Infrastructure Security                                       │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │  • Server Hardening  • OS Updates  • Access Control            │    │
│  │  • Backup Systems  • Monitoring                                │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                  │                                       │
│  Layer 1: Physical Security                                             │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │  • Data Center Security  • Physical Access Control             │    │
│  │  • Environmental Controls  • Redundancy                        │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 10. Database Entity Relationship Diagram


```
┌──────────────────┐
│      users       │
├──────────────────┤
│ PK id            │
│    name          │
│    email         │
│    password      │
│    role          │
│    created_at    │
└────────┬─────────┘
         │ 1
         │
         │ N
┌────────▼─────────┐         ┌──────────────────┐
│    requests      │    1:1  │    payments      │
├──────────────────┤◄────────┤──────────────────┤
│ PK id            │         │ PK id            │
│ FK user_id       │         │ FK request_id    │
│    applicant_name│         │    amount        │
│    project_type  │         │    payment_method│
│    status        │         │    status        │
│    evaluation    │         │    receipt_file  │
│    created_at    │         │    created_at    │
└────────┬─────────┘         └──────────────────┘
         │ 1
         │
         │ 1
┌────────▼─────────┐
│  certificates    │
├──────────────────┤
│ PK id            │
│ FK request_id    │
│    cert_number   │
│    issued_at     │
│    status        │
│    created_at    │
└──────────────────┘


┌──────────────────┐         ┌──────────────────┐
│   audit_logs     │         │  notifications   │
├──────────────────┤         ├──────────────────┤
│ PK id            │         │ PK id            │
│ FK user_id       │         │ FK user_id       │
│    action        │         │    type          │
│    model_type    │         │    message       │
│    model_id      │         │    read_at       │
│    old_values    │         │    created_at    │
│    new_values    │         └──────────────────┘
│    ip_address    │
│    user_agent    │
│    created_at    │
└──────────────────┘


┌──────────────────┐         ┌──────────────────┐
│   reminders      │         │ status_history   │
├──────────────────┤         ├──────────────────┤
│ PK id            │         │ PK id            │
│ FK request_id    │         │ FK request_id    │
│    type          │         │    old_status    │
│    sent_at       │         │    new_status    │
│    created_at    │         │    changed_by    │
└──────────────────┘         │    created_at    │
                             └──────────────────┘
```

---

**Document Version:** 1.0  
**Created:** January 29, 2026  
**Purpose:** Visual representation of CPDO system architecture
